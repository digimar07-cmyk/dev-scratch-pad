"""\nUtils â€” Thumbnail Cache\nCache LRU simples para thumbnails\n"""\n\nfrom collections import OrderedDict\n\n\nclass ThumbnailCache:\n    def __init__(self, limit=300):\n        self.cache = OrderedDict()\n        self.limit = limit\n\n    def get(self, key):\n        return self.cache.get(key)\n\n    def set(self, key, value):\n        self.cache[key] = value\n        self.cache.move_to_end(key)\n        while len(self.cache) > self.limit:\n            self.cache.popitem(last=False)\n\n    def move_to_end(self, key):\n        if key in self.cache:\n            self.cache.move_to_end(key)\n\n    def __getitem__(self, key):\n        return self.cache[key]\n\n    def __setitem__(self, key, value):\n        self.set(key, value)\n\n    def __len__(self):\n        return len(self.cache)\n\n    def popitem(self, last=True):\n        return self.cache.popitem(last=last)\n