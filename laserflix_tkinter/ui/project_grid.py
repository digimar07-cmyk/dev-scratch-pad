"""\nUI â€” Project Grid\nGrid de projetos (estilo Netflix)\n"""\n\nimport tkinter as tk\nfrom tkinter import ttk\nfrom ui.project_card import ProjectCard\n\n\nclass ProjectGrid:\n    def __init__(self, parent, thumbnail_cache, card_callbacks):\n        """\n        card_callbacks: dict com callbacks para cada card {\n            'favorite': func(path, btn),\n            'done': func(path, btn),\n            'good': func(path, btn),\n            'bad': func(path, btn),\n            'analyze': func(path),\n            'open_folder': func(path),\n            'open_details': func(path)\n        }\n        """\n        self.parent = parent\n        self.thumbnail_cache = thumbnail_cache\n        self.card_callbacks = card_callbacks\n        self.canvas = None\n        self.scrollbar = None\n        self.inner_frame = None\n        self.cards = []\n        self.create_ui()\n\n    def create_ui(self):\n        """Cria canvas com scrollbar."""\n        # Scrollbar\n        self.scrollbar = ttk.Scrollbar(self.parent, orient="vertical")\n        self.scrollbar.pack(side="right", fill="y")\n\n        # Canvas\n        self.canvas = tk.Canvas(self.parent, bg="#141414",\n                              yscrollcommand=self.scrollbar.set,\n                              highlightthickness=0)\n        self.canvas.pack(side="left", fill="both", expand=True)\n        self.scrollbar.config(command=self.canvas.yview)\n\n        # Frame interno\n        self.inner_frame = tk.Frame(self.canvas, bg="#141414")\n        self.canvas.create_window((0, 0), window=self.inner_frame, anchor="nw")\n\n        # Bind resize\n        self.inner_frame.bind("<Configure>", self._on_frame_configure)\n        self.canvas.bind("<MouseWheel>", self._on_mousewheel)\n\n    def _on_frame_configure(self, event):\n        """Atualiza scrollregion do canvas."""\n        self.canvas.configure(scrollregion=self.canvas.bbox("all"))\n\n    def _on_mousewheel(self, event):\n        """Scroll com mouse wheel."""\n        self.canvas.yview_scroll(int(-1*(event.delta/120)), "units")\n\n    def clear(self):\n        """Limpa todos os cards."""\n        for widget in self.inner_frame.winfo_children():\n            widget.destroy()\n        self.cards.clear()\n\n    def display_projects(self, projects_data):\n        """\n        Exibe projetos no grid.\n        projects_data: list de tuples (project_path, data_dict)\n        """\n        self.clear()\n        if not projects_data:\n            no_results = tk.Label(self.inner_frame, text="Nenhum projeto encontrado",\n                                font=("Arial", 14), bg="#141414", fg="#666666")\n            no_results.pack(pady=50)\n            return\n\n        # Cria grid de cards\n        row = 0\n        col = 0\n        max_cols = 5  # 5 cards por linha\n\n        for project_path, data in projects_data:\n            card = ProjectCard(\n                self.inner_frame,\n                project_path,\n                data,\n                self.thumbnail_cache,\n                self.card_callbacks\n            )\n            card.frame.grid(row=row, column=col, padx=10, pady=10, sticky="n")\n            self.cards.append(card)\n\n            col += 1\n            if col >= max_cols:\n                col = 0\n                row += 1\n\n        # Scroll para o topo\n        self.canvas.yview_moveto(0)\n