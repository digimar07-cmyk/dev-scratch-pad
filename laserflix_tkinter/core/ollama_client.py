"""\nCore — Ollama Client\nComunicação HTTP com servidor Ollama\n"""\n\nimport requests\nimport time\nfrom config import TIMEOUTS, LOGGER\n\n\nclass OllamaClient:\n    def __init__(self, base_url="http://localhost:11434", active_models=None):\n        self.base_url = base_url\n        self.session = requests.Session()\n        self.retries = 3\n        self.health_timeout = 4\n        self._health_cache = {"ts": 0.0, "ok": None}\n        self.active_models = active_models or {}\n\n    def is_available(self):\n        """Verifica disponibilidade do Ollama com cache de 5s."""\n        try:\n            now = time.time()\n            cached = self._health_cache\n            if cached.get("ok") is not None and (now - cached.get("ts", 0.0)) < 5.0:\n                return bool(cached["ok"])\n            resp = self.session.get(\n                f"{self.base_url}/api/tags",\n                timeout=self.health_timeout,\n            )\n            ok = resp.status_code == 200\n            self._health_cache = {"ts": now, "ok": ok}\n            return ok\n        except Exception:\n            self._health_cache = {"ts": time.time(), "ok": False}\n            return False\n\n    def get_model_name(self, role):\n        """Retorna nome do modelo para o papel especificado."""\n        from config import OLLAMA_MODELS\n        return self.active_models.get(role, OLLAMA_MODELS.get(role, ""))\n\n    def get_timeout(self, role):\n        """Retorna timeout para o papel especificado."""\n        return TIMEOUTS.get(role, (5, 30))\n