"""\nCore — Config Manager\nGerenciamento de configurações (pastas, modelos)\n"""\n\nimport json\nimport os\nfrom config import CONFIG_FILE, OLLAMA_MODELS, LOGGER\n\n\nclass ConfigManager:\n    def __init__(self):\n        self.folders = []\n        self.active_models = dict(OLLAMA_MODELS)\n        self.load_config()\n\n    def load_config(self):\n        """Carrega configurações salvas."""\n        if os.path.exists(CONFIG_FILE):\n            try:\n                with open(CONFIG_FILE, "r", encoding="utf-8") as f:\n                    config = json.load(f)\n                    self.folders = config.get("folders", [])\n                    saved_models = config.get("models", {})\n                    if saved_models:\n                        self.active_models.update(saved_models)\n                LOGGER.info(f"⚙️ Config carregada: {len(self.folders)} pastas")\n            except Exception as e:\n                LOGGER.error(f"Falha ao carregar {CONFIG_FILE}: {e}", exc_info=True)\n\n    def save_config(self):\n        """Salva configurações de forma atômica."""\n        tmp_file = CONFIG_FILE + ".tmp"\n        try:\n            with open(tmp_file, "w", encoding="utf-8") as f:\n                json.dump({\n                    "folders": self.folders,\n                    "models": self.active_models\n                }, f, indent=2, ensure_ascii=False)\n            os.replace(tmp_file, CONFIG_FILE)\n        except Exception:\n            LOGGER.error(f"Falha ao salvar {CONFIG_FILE}", exc_info=True)\n            try:\n                if os.path.exists(tmp_file):\n                    os.remove(tmp_file)\n            except Exception:\n                pass\n\n    def add_folder(self, folder):\n        """Adiciona pasta se não existir."""\n        if folder and folder not in self.folders:\n            self.folders.append(folder)\n            self.save_config()\n            return True\n        return False\n